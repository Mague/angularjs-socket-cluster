/**
 * AngularJS SocketCluster Interface
 * @author Ryan Page <ryanpager@gmail.com>
 * @version v1.1.0
 * @see https://github.com/ryanpager/angularjs-socket-cluster#readme
 * @license MIT
 */
!function(){"use strict";var n;n=function(){function n(){}var o,r,e;return n.prototype.$inject=[],r=!1,e=null,o={autoReconnect:!0,protocol:"http",hostname:"127.0.0.1",port:8e3},n.prototype.$get=["socketCluster","$q","$rootScope","$log","$timeout",function(n,t,c,u,i){var s;return s={connect:function(c){return null==c&&(c={}),t(function(t,i){return angular.merge(o,c),r&&u.info("Socket :: Attempting connection..."),e=n.connect(o),e.on("error",function(n){return u.error("Socket :: Error >> "+n)}),e.on("subscribeFail",function(n){return u.error("Socket :: Channel subscription error >> "+n)}),e.on("disconnect",function(n){return r?u.info("Socket :: Disconnection successful"):void 0}),e.on("connectAbort",function(n){return n="Socket :: Connection aborted >> "+n,u.error(n),i(n)}),e.on("connect",function(){return r&&u.info("Socket :: Connection successful"),t(!0)})})},disconnect:function(){return t(function(n,o){var t;return r&&u.info("Socket :: Attempting disconnect..."),null==e&&(t="Socket :: Error >> no socket connection established.",u.error(t),o(t)),e.disconnect(),n(!0)})},subscribe:function(n){return null==n&&(n=null),t(function(o,t){var i;return null==n&&(i="Socket :: Error >> no socket channel specified.",u.error(i),t(i)),null==e&&(i="Socket :: Error >> no socket connection established.",u.error(i),t(i)),r&&u.info("Socket :: Subscribe to channel "+n),e.watch(n,function(n){return null!=n.$error?void(r&&u.error("Socket :: Event error >>",n)):(r&&u.info("Socket :: Event received >>",n),c.$apply(function(){return r&&u.info("Socket :: Rebroadcast event >> "+n.$event),c.$broadcast("socket:"+n.$event,n)}))}),e.subscribe(n),o(!0)})},unsubscribe:function(n){return null==n&&(n=null),t(function(o,t){var c;return null==n&&(c="Socket :: Error >> no socket channel specified.",u.error(c),t(c)),null==e&&(c="Socket :: Error >> no socket connection established.",u.error(c),t(c)),r&&u.info("Socket :: Unsubscribe to channel "+n),e.unsubscribe(n),e.unwatch(n),o(!0)})},publish:function(n,o){return null==n&&(n=null),null==o&&(o={}),t(function(t,c){var i;return null==n&&(i="Socket :: Error >> no socket channel specified.",u.error(i),c(i)),null==e&&(i="Socket :: Error >> no socket connection established.",u.error(i),c(i)),r&&u.info("Socket :: Publish to channel "+n+" >>",o),e.publish(n,o,function(n){return null!=n?(u.error("Socket :: Error >> publish failed >> "+n),c(n)):t(!0)})})},toggleDebugging:function(n){return null==n&&(n=!1),r=n},subscriptions:function(){return null==e?void u.error("Socket :: Error >> no socket connection established."):e.subscriptions()},isSubscribed:function(n){return null==e?void u.error("Socket :: Error >> no socket connection established."):e.isSubscribed(n)}}}],n}(),angular.module("sbb.components",[]).constant("socketCluster",socketCluster).provider("sbb.components.socket",n)}();